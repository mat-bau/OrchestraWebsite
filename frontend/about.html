<!DOCTYPE html>
<html lang="fr">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0,maximum-scale=1">
	<meta name="description" content="Official website of the Louvain-la-Neuve based Orchestrakot.">
	<link rel="shortcut icon" type="image/x-icon" href="../images/support_graphique/Logo_Orchestrakot_SQUARE.png?v=2"/>
	<title>About - OrchestraKot</title>
	
	<link href="http://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600,700,900" rel="stylesheet" type="text/css">
	<link href="../fonts/font-awesome.min.css" rel="stylesheet" type="text/css">
	<link rel="stylesheet" href="style.css">
	
	<style>
		
		.breadcrumb-team {
			font-size: 14px;
			color: #666;
			margin-bottom: 15px;
		}
		
		.breadcrumb-team .separator {
			margin: 0 5px;
			color: #999;
		}
		
		.breadcrumb-team .active {
			color: #e74c3c;
			font-weight: 600;
		}
		
		.team-member {
			display: none;
			animation: fadeIn 0.4s ease;
		}
		
		.team-member.visible {
			display: block;
		}
		
		@keyframes fadeIn {
			from {
				opacity: 0;
				transform: translateY(8px);
			}
			to {
				opacity: 1;
				transform: translateY(0);
			}
		}
		
		.empty-state {
			text-align: center;
			padding: 40px 20px;
			color: #999;
			display: none;
		}
		
		.empty-state.visible {
			display: block;
		}
		
		.empty-state i {
			font-size: 48px;
			margin-bottom: 10px;
			opacity: 0.5;
		}
		
		@media (max-width: 768px) {
			.filter-buttons {
				gap: 5px;
			}
			
			.filter-btn {
				padding: 6px 12px;
				font-size: 12px;
			}
		}
				.team-navigation {
			margin-bottom: 20px;
			border-bottom: 1px solid #2a2a2a;
			padding-bottom: 10px;
		}

		.team-nav-link {
			color: #999;
			text-decoration: none;
			font-size: 14px;
			font-weight: 500;
			margin-right: 20px;
			padding-bottom: 3px;
			transition: all 0.3s ease;
			display: inline-block;
		}

		.team-nav-link:hover {
			color: #e74c3c;
		}

		.team-nav-link.active {
			color: #e74c3c;
			font-weight: 600;
			border-bottom: 2px solid #e74c3c;
		}

		.team-nav-link i {
			font-size: 11px;
			margin-left: 4px;
			opacity: 0.7;
		}
	</style>
</head>

<body>
	<div id="site-content">
		<header class="site-header">
			<div class="container">
				<a href="index.html" id="branding">
					<img src="../images/support_graphique/Logo_Orchestrakot_SQUARE.png" alt="Site Title" class="head_logo">
				</a>

				<nav class="main-navigation">
					<button type="button" class="toggle-menu"><i class="fa fa-bars"></i></button>
					<ul class="menu">
						<li class="menu-item"><a href="index.html">Home</a></li>
						<li class="menu-item current-menu-item"><a href="about.html">About</a></li>
						<li class="menu-item"><a href="gallery.html">Galerie</a></li>
						<li class="menu-item"><a href="videos.html">Vidéos</a></li>
						<li class="menu-item"><a href="front.html">Planifier</a></li>
						<li class="menu-item"><a href="contact.html">Contact</a></li>
					</ul>
				</nav>
				<div class="mobile-menu"></div>
			</div>
		</header>

		<main class="main-content">
			<div class="fullwidth-block inner-content">
				<div class="container">
					<div class="row">
						<div class="col-md-8"> 
							<div class="content"> 
								<h2 class="entry-title">Offres musicales personnalisées</h2> 
								<p class="leading">L'OrchestraKot joue pour vous!</p> 
								<p>Nous accueillons à bras ouverts les demandes d'animation musicale lors de vos événements, aussi divers soient-ils. 
								Que ce soit pour des kots à projets, pour des particuliers, des remises de diplômes ou encore d'autres activités, nous sommes ouverts à tout!</p> 
								<img id="current-team-photo" src="../images/public/Général/lequipe2024.jpg" width="100%" height="100%"> 
							</div>

							<div class="content">
								<h2 class="entry-title">Le Concert</h2>
								<p class="leading">L'événement principal de l'OrchestraKot.</p>
								<p>Chaque premier quadrimestre, nous faisons une représentation à la Ferme du Biéreau, avec chaque année un thème différent.
								Notre concert c'est quoi ? C'est un concert de 2 heures tenu dans la grange de la Ferme du Biéreau où nous jouons de la musique autour d'un thème
								pour vous ambiancez vous qui venez à cet événement !</p>
								<p>Il se déroule généralement à la mi novembre.
								Pour être tenu au courant de quand et où cela se passe, allez sur notre page Facebook. Cette année, il se déroule le 14 novembre à 20h.
								Reservez vos places : 
									<div class="social-links">
										<a href="https://www.facebook.com/events/1266644341134932?locale=fr_FR"><i class="fa fa-facebook-square"></i></a>
									</div>
								</p>
								<p>Voici le trailer du concert pour vous donner un avant goût</p>
								<iframe width="700" height="400" src="https://www.youtube.com/embed/1JbgfiQ49IM" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
							</div>

							<div class="content">
								<h2 class="entry-title">Initiation aux instruments</h2>
								<p class="leading">Jouer sur plus d'une dizaine d'instruments en une soirée? C'est par ici que ça se passe!</p>
								<p>L'Orchestrakot permet à tout le monde de découvrir un ou plusieurs nouveaux instruments lors de nos soirées d'initiation. De la batterie à la clarinette en passant par la harpe, nous avons une belle panoplie d'instruments à vous faire (re)découvrir. Chaque membre de l'équipe aura le plaisir de vous apprendre à jouer quelques notes sur son instrument.</p>
								<p>Avant tout, l'initiation aux instruments est un moment de plaisir et de découverte, le tout dans une ambiance décontractée. Que vous n'ayez jamais touché un instrument ou que vous soyez un musicien aguerri, tous sont les bienvenus!</p>
								<p>Pour être tenu au courant de quand et où cela se passe, allez sur notre page Facebook !</p>
								<img src="../images/about/PhotoViolons.jpg" width="100%" height="100%">
								<img src="../images/about/PhotoSax.jpg" width="100%" height="100%">
								<img src="../images/about/PhotoGuitares.jpg" width="100%" height="100%">
								<img src="../images/about/PhotoPiano.jpg" width="100%" height="100%">
							</div>
						</div>	
						<div class="col-md-4">
							<aside class="sidebar">
								<div class="widget">
									<h3 class="widget-title widget-title-dynamic" id="team-title">
										<a href="gallery.html" style="color: inherit; text-decoration: none;">
											L'équipe
										</a>
									</h3>
									<div style="margin-bottom: 20px; border-bottom: 1px solid #333; padding-bottom: 10px;">
										<a href="#" id="current-team-link" 
											style="color: #e74c3c; 
													text-decoration: none; 
													font-size: 14px;
													font-weight: 600;
													margin-right: 15px;
													border-bottom: 2px solid #e74c3c;
													padding-bottom: 3px;">
											Équipe actuelle
										</a>
										<a href="gallery.html" 
											style="color: #999; 
													text-decoration: none; 
													font-size: 14px;
													font-weight: 500;
													transition: color 0.3s ease;">
											Toutes les équipes
											<i class="fa fa-arrow-right" style="font-size: 12px; margin-left: 4px;"></i>
										</a>
									</div>

									<!-- Liste des membres -->
									<ul class="discography-list" id="team-list">
										<!-- c'est géré dynamiquement ! il faut juste remplir le team-profiles.json situé dans la racine -->
									</ul>
									
									<div class="empty-state" id="empty-state">
										<i class="fa fa-search"></i>
										<p>Aucun membre trouvé pour cette sélection</p>
									</div>
								</div>
							</aside>
						</div>
					</div>
				</div>
			</div>
		</main>

		<footer class="site-footer">
			<div class="container">
				<img src="../images/support_graphique/Logo_Orchestrakot_Rectangle.png" alt="Site Name" class="foot_logo">
				<address>
					<p>1 Rampes des Ardennais, Louvain-la-Neuve, Belgique <br>
					<a href="tel:+32494718552">(+32) 494 71 85 52</a> <br>
					<a href="mailto:orchestrakot.ucl@gmail.com">orchestrakot.ucl@gmail.com</a></p>
				</address>
				<div class="social-links">
					<a href="https://www.facebook.com/orchestrakot/"><i class="fa fa-facebook-square"></i></a>
					<a href="https://www.instagram.com/orchestrakot/?hl=en"><i class="fa fa-instagram"></i></a>
				</div>
			</div>
		</footer>
	</div>

	<script src="../js/jquery-1.11.1.min.js"></script>
	<script src="../js/plugins.js"></script>
	<script src="../js/app.js"></script>
	
	<script>
		let teamProfiles = null;
		const currentSchoolYear = getCurrentSchoolYear();

		function getCurrentSchoolYear() {
			const now = new Date();
			const year = now.getFullYear();
			const month = now.getMonth() + 1;
			if (month >= 1 && month <= 8) {
				return `${year - 1}-${year}`;
			} else {
				return `${year}-${year + 1}`;
			}
		}

		async function loadTeamProfiles() {
			try {
				const response = await fetch('/team-profiles.json');
				if (!response.ok) {
					throw new Error(`HTTP error! status: ${response.status}`);
				}
				teamProfiles = await response.json();
				renderCurrentTeam();
			} catch (error) {
				console.error('Erreur chargement profils:', error);
				document.getElementById('team-list').innerHTML = 
					'<li style="color: #999; padding: 20px;">Impossible de charger l\'équipe</li>';
			}
		}

		function isMemberInCurrentYear(member) {
			const [startYear] = currentSchoolYear.split('-').map(Number);
			return member.annee_debut <= startYear && startYear < member.annee_fin;
		}

		function getCurrentYearImage(member) {
			const [startYear] = currentSchoolYear.split('-').map(Number);
			const yearIndex = startYear - member.annee_debut;
			
			if (yearIndex >= 0 && yearIndex < member.images.length) {
				return member.images[yearIndex];
			}
			return member.images[member.images.length - 1];
		}

		function getCurrentYearRole(member) {
			if (typeof member.roles === 'object' && member.roles !== null && !Array.isArray(member.roles)) {
				return member.roles[currentSchoolYear] || "";
			}
			
			if (typeof member.roles === 'string') {
				return member.roles;
			}
			
			return "";
		}

		function getCurrentYearStudies(member) {
			if (typeof member.etudes === 'object' && member.etudes !== null && !Array.isArray(member.etudes)) {
				return member.etudes[currentSchoolYear] || "";
			}
			
			if (typeof member.etudes === 'string') {
				return member.etudes;
			}
			
			return "";
		}

		function normalizeRole(role) {
			return role.toLowerCase()
				.normalize("NFD")
				.replace(/[\u0300-\u036f]/g, "");
		}

		function renderCurrentTeam() {
			const teamList = document.getElementById('team-list');
			let html = '';
			
			const currentMembers = teamProfiles.members.filter(isMemberInCurrentYear);
			
			if (currentMembers.length === 0) {
				teamList.innerHTML = '<li style="color: #999; padding: 20px;">Aucun membre pour cette année</li>';
				return;
			}
			
			const ROLE_PRIORITY = {
				"president": 0,
				"vice-president": 1,
				"tresorier": 2,    
				"tresoriere": 2,   
				"secretaire": 3    
			};
			
			// Tri par rôle puis par nom
			currentMembers.sort((a, b) => {
				const roleA = normalizeRole(getCurrentYearRole(a));
				const roleB = normalizeRole(getCurrentYearRole(b));
				
				const priorityA = ROLE_PRIORITY[roleA] !== undefined ? ROLE_PRIORITY[roleA] : 999;
				const priorityB = ROLE_PRIORITY[roleB] !== undefined ? ROLE_PRIORITY[roleB] : 999;
				
				if (priorityA !== priorityB) {
					return priorityA - priorityB;
				}
				
				return a.name.localeCompare(b.name);
			});
			
			currentMembers.forEach(member => {
				const imagePath = getCurrentYearImage(member);
				const instruments = member.instruments.join(', ');
				const dataInstruments = member.instruments.map(i => i.toLowerCase()).join(',');
				const currentRole = getCurrentYearRole(member);
				const currentStudies = getCurrentYearStudies(member);
				
				html += `
					<li class="team-member visible" 
						data-year="${currentSchoolYear}" 
						data-instrument="${dataInstruments}"
						data-role="${currentRole ? normalizeRole(currentRole) : ''}">
						<figure class="cover">
							<a href="gallery.html?path=Nos équipes/Par instrument/${member.instruments[0]}">
								<img src="../${imagePath}" alt="${member.name}">
							</a>
						</figure>
						<div class="detail">
							<h3>
								<a href="gallery.html?path=Nos équipes/Par instrument/${member.instruments[0]}">${member.name}</a>
							</h3>
							<span class="year">${instruments}</span>
							${currentRole ? `<span class="track">${currentRole}</span><br>` : ''}
							${currentStudies ? `<span class="track">${currentStudies}</span>` : ''}
						</div>
					</li>
				`;
			});
			
			teamList.innerHTML = html;
		}

		function updateTitle() {
			const title = document.getElementById('team-title');
			title.innerHTML = `
				<a href="gallery.html?path=Nos équipes" style="color: inherit; text-decoration: none;">
					L'équipe ${currentSchoolYear}
				</a>
			`;
		}

		function displayTeamPhoto() {
			if (teamProfiles.team_photos && teamProfiles.team_photos[currentSchoolYear]) {
				const teamPhotoContainer = document.getElementById('team-photo-container');
				if (teamPhotoContainer) {
					const photoPath = teamProfiles.team_photos[currentSchoolYear];
					teamPhotoContainer.innerHTML = `
						<div style="margin-bottom: 20px; border-radius: 8px; overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
							<img src="../${photoPath}" 
								alt="L'équipe ${currentSchoolYear}" 
								style="width: 100%; height: auto; display: block;">
							<p style="text-align: center; padding: 10px; background: #2a2a2a; color: #999; font-size: 13px; margin: 0;">
								L'équipe complète ${currentSchoolYear}
							</p>
						</div>
					`;
				}
			}
		}
		async function loadCurrentTeamPhoto() {
			try {
				const response = await fetch('../team-profiles.json');
				const data = await response.json();
				
				if (data.team_photos) {
					const now = new Date();
					const month = now.getMonth() + 1;
					const year = now.getFullYear();
					const schoolYear = month >= 9 
						? `${year}-${year + 1}` 
						: `${year - 1}-${year}`;
					
					const photoPath = data.team_photos[schoolYear];
					
					if (photoPath) {
						document.getElementById('current-team-photo').src = '../' + photoPath;
					}
				}
			} catch (error) {
				console.error('Erreur chargement photo équipe:', error);
			}
		}
		document.addEventListener('DOMContentLoaded', loadCurrentTeamPhoto);

		document.addEventListener('DOMContentLoaded', function() {
			loadTeamProfiles().then(() => {
				displayTeamPhoto();
			});
			updateTitle();
		});
	</script>
</body>
</html>